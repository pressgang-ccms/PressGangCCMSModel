<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <changeSet id="1" author="lnewson@redhat.com">
        <comment>Add new Content Spec table</comment>
        <createTable tableName="ContentSpec">
            <column name="ContentSpecID" type="int(11)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="ContentSpecType" type="tinyint">
                <constraints nullable="false"/>
            </column>
            <column name="LastPublished" type="datetime">
                <constraints nullable="true"/>
            </column>
            <column name="LastModified" type="datetime">
                <constraints nullable="true"/>
            </column>
            <column name="Locale" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="GlobalCondition" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="Errors" type="TEXT">
                <constraints nullable="true"/>
            </column>
            <column name="FailedSpec" type="MEDIUMTEXT">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="2" author="lnewson@redhat.com">
        <comment>Add new Content Spec revision table</comment>
        <createTable tableName="ContentSpec_AUD">
            <column name="ContentSpecID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REV" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REVTYPE" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="REVEND" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="ContentSpecType" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="LastPublished" type="datetime">
                <constraints nullable="true"/>
            </column>
            <column name="LastModified" type="datetime">
                <constraints nullable="true"/>
            </column>
            <column name="Locale" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="GlobalCondition" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="Errors" type="TEXT">
                <constraints nullable="true"/>
            </column>
            <column name="FailedSpec" type="MEDIUMTEXT">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="ContentSpec_AUD" columnNames="ContentSpecID, REV"/>
        <addForeignKeyConstraint constraintName="FK_REV_CS"
                                 baseTableName="ContentSpec_AUD"
                                 baseColumnNames="REV"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <addForeignKeyConstraint constraintName="FK_REVEND_CS"
                                 baseTableName="ContentSpec_AUD"
                                 baseColumnNames="REVEND"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
    </changeSet>

    <changeSet id="3" author="lnewson@redhat.com">
        <comment>Add new Content Spec to Property Tag joiner table</comment>
        <createTable tableName="ContentSpecToPropertyTag">
            <column name="ContentSpecToPropertyTagID" type="int(11)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="ContentSpecID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="PropertyTagID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="Value" type="text"/>
        </createTable>
        <addForeignKeyConstraint constraintName="FK_ContentSpecID_CS_PROP_TAG"
                                 baseTableName="ContentSpecToPropertyTag"
                                 baseColumnNames="ContentSpecID"
                                 referencedTableName="ContentSpec"
                                 referencedColumnNames="ContentSpecID"/>
        <addForeignKeyConstraint constraintName="FK_PropertyTagID_CS_PROP_TAG"
                                 baseTableName="ContentSpecToPropertyTag"
                                 baseColumnNames="PropertyTagID"
                                 referencedTableName="PropertyTag"
                                 referencedColumnNames="PropertyTagID"/>
    </changeSet>

    <changeSet id="4" author="lnewson@redhat.com">
        <comment>Add new Content Spec to Property Tag revision joiner table</comment>
        <createTable tableName="ContentSpecToPropertyTag_AUD">
            <column name="ContentSpecToPropertyTagID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REV" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REVTYPE" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="REVEND" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="ContentSpecID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="PropertyTagID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="Value" type="text"/>
        </createTable>
        <addPrimaryKey tableName="ContentSpecToPropertyTag_AUD" columnNames="ContentSpecToPropertyTagID, REV"/>
        <addForeignKeyConstraint constraintName="FK_REV_CS_PROP_TAG"
                                 baseTableName="ContentSpecToPropertyTag_AUD"
                                 baseColumnNames="REV"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <addForeignKeyConstraint constraintName="FK_REVEND_CS_PROP_TAG"
                                 baseTableName="ContentSpecToPropertyTag_AUD"
                                 baseColumnNames="REVEND"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <createIndex tableName="ContentSpecToPropertyTag_AUD" indexName="ContentSpecID">
            <column name="ContentSpecID"/>
        </createIndex>
        <createIndex tableName="ContentSpecToPropertyTag_AUD" indexName="PropertyTagID">
            <column name="PropertyTagID"/>
        </createIndex>
    </changeSet>

    <changeSet id="5" author="lnewson@redhat.com">
        <comment>Add new Content Spec to Tag joiner table</comment>
        <createTable tableName="ContentSpecToTag">
            <column name="ContentSpecToTagID" type="int(11)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="ContentSpecID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="TagID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="BookTag" type="bit">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint constraintName="FK_ContentSpecID_CS_TAG"
                                 baseTableName="ContentSpecToTag"
                                 baseColumnNames="ContentSpecID"
                                 referencedTableName="ContentSpec"
                                 referencedColumnNames="ContentSpecID"/>
        <addForeignKeyConstraint constraintName="FK_TagID_CS_TAG"
                                 baseTableName="ContentSpecToTag"
                                 baseColumnNames="TagID"
                                 referencedTableName="Tag"
                                 referencedColumnNames="TagID"/>
    </changeSet>

    <changeSet id="6" author="lnewson@redhat.com">
        <comment>Add new Content Spec to Tag revision joiner table</comment>
        <createTable tableName="ContentSpecToTag_AUD">
            <column name="ContentSpecToTagID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REV" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REVTYPE" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="REVEND" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="ContentSpecID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="TagID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="BookTag" type="bit">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="ContentSpecToTag_AUD" columnNames="ContentSpecToTagID, REV"/>
        <addForeignKeyConstraint constraintName="FK_REV_CS_TAG"
                                 baseTableName="ContentSpecToTag_AUD"
                                 baseColumnNames="REV"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <addForeignKeyConstraint constraintName="FK_REVEND_CS_TAG"
                                 baseTableName="ContentSpecToTag_AUD"
                                 baseColumnNames="REVEND"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <createIndex tableName="ContentSpecToTag_AUD" indexName="ContentSpecID">
            <column name="ContentSpecID"/>
        </createIndex>
        <createIndex tableName="ContentSpecToTag_AUD" indexName="TagID">
            <column name="TagID"/>
        </createIndex>
    </changeSet>

    <changeSet id="7" author="lnewson@redhat.com">
        <comment>Add new Content Spec Node table</comment>
        <createTable tableName="ContentSpecNode">
            <column name="ContentSpecNodeID" autoIncrement="true" type="int(11)">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="NodeTitle" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="NodeTargetID" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="NodeType" type="tinyint">
                <constraints nullable="false"/>
            </column>
            <column name="NodeCondition" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="AdditionalText" type="text">
                <constraints nullable="true"/>
            </column>
            <column name="EntityID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="EntityRevision" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="ContentSpecID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="ParentID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="NextNodeID" type="int(11)">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addForeignKeyConstraint constraintName="FK_ContentSpecID_CS_NODE"
                                 baseTableName="ContentSpecNode"
                                 baseColumnNames="ContentSpecID"
                                 referencedTableName="ContentSpec"
                                 referencedColumnNames="ContentSpecID"/>
        <addForeignKeyConstraint constraintName="FK_ParentID_CS_NODE"
                                 baseTableName="ContentSpecNode"
                                 baseColumnNames="ParentID"
                                 referencedTableName="ContentSpecNode"
                                 referencedColumnNames="ContentSpecNodeID"/>
        <addForeignKeyConstraint constraintName="FK_NextNodeID_CS_NODE"
                                 baseTableName="ContentSpecNode"
                                 baseColumnNames="NextNodeID"
                                 referencedTableName="ContentSpecNode"
                                 referencedColumnNames="ContentSpecNodeID"/>
    </changeSet>

    <changeSet id="8" author="lnewson@redhat.com">
        <comment>Add new Content Spec Node revision table</comment>
        <createTable tableName="ContentSpecNode_AUD">
            <column name="ContentSpecNodeID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REV" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REVTYPE" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="REVEND" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="NodeTitle" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="NodeTargetID" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="NodeType" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="NodeCondition" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="AdditionalText" type="text">
                <constraints nullable="true"/>
            </column>
            <column name="EntityID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="EntityRevision" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="ContentSpecID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="ParentID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="NextNodeID" type="int(11)">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="ContentSpecNode_AUD" columnNames="ContentSpecNodeID, REV"/>
        <addForeignKeyConstraint constraintName="FK_REV_CS_NODE"
                                 baseTableName="ContentSpecNode_AUD"
                                 baseColumnNames="REV"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <addForeignKeyConstraint constraintName="FK_REVEND_CS_NODE"
                                 baseTableName="ContentSpecNode_AUD"
                                 baseColumnNames="REVEND"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <createIndex tableName="ContentSpecNode_AUD" indexName="ContentSpecID">
            <column name="ContentSpecID"/>
        </createIndex>
        <createIndex tableName="ContentSpecNode_AUD" indexName="ParentID">
            <column name="ParentID"/>
        </createIndex>
        <createIndex tableName="ContentSpecNode_AUD" indexName="NextNodeID">
            <column name="NextNodeID"/>
        </createIndex>
    </changeSet>

    <changeSet id="9" author="lnewson@redhat.com">
        <comment>Add new Content Spec Node to Content Spec Node joiner table</comment>
        <createTable tableName="CSNodeToCSNode">
            <column name="CSNodeToCSNodeID" type="int(11)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="MainNodeID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="RelatedNodeID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="RelationshipType" type="tinyint">
                <constraints nullable="false"/>
            </column>
            <column name="Sort" type="int(11)"/>
        </createTable>
        <addForeignKeyConstraint constraintName="FK_MainNodeID_CS_NODE_TO_NODE"
                                 baseTableName="CSNodeToCSNode"
                                 baseColumnNames="MainNodeID"
                                 referencedTableName="ContentSpecNode"
                                 referencedColumnNames="ContentSpecNodeID"/>
        <addForeignKeyConstraint constraintName="FK_RelatedNodeID_CS_NODE_TO_NODE"
                                 baseTableName="CSNodeToCSNode"
                                 baseColumnNames="RelatedNodeID"
                                 referencedTableName="ContentSpecNode"
                                 referencedColumnNames="ContentSpecNodeID"/>
    </changeSet>

    <changeSet id="10" author="lnewson@redhat.com">
        <comment>Add new Content Spec Node to Content Spec Node revision joiner table</comment>
        <createTable tableName="CSNodeToCSNode_AUD">
            <column name="CSNodeToCSNodeID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REV" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REVTYPE" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="REVEND" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="MainNodeID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="RelatedNodeID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="RelationshipType" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="Sort" type="int(11)">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="CSNodeToCSNode_AUD" columnNames="CSNodeToCSNodeID, REV"/>
        <addForeignKeyConstraint constraintName="FK_REV_CS_NODE_TO_NODE"
                                 baseTableName="CSNodeToCSNode_AUD"
                                 baseColumnNames="REV"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <addForeignKeyConstraint constraintName="FK_REVEND_CS_NODE_TO_NODE"
                                 baseTableName="CSNodeToCSNode_AUD"
                                 baseColumnNames="REVEND"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <createIndex tableName="CSNodeToCSNode_AUD" indexName="MainNodeID">
            <column name="MainNodeID"/>
        </createIndex>
        <createIndex tableName="CSNodeToCSNode_AUD" indexName="RelatedNodeID">
            <column name="RelatedNodeID"/>
        </createIndex>
    </changeSet>

    <changeSet id="11" author="lnewson@redhat.com">
        <comment>Add new Content Spec Node to PropertyTag joiner table</comment>
        <createTable tableName="CSNodeToPropertyTag">
            <column name="CSNodeToPropertyTagID" type="int(11)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="CSNodeID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="PropertyTagID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="Value" type="text"/>
        </createTable>
        <addForeignKeyConstraint constraintName="FK_CSNodeID_CS_NODE_PROP_TAG"
                                 baseTableName="CSNodeToPropertyTag"
                                 baseColumnNames="CSNodeID"
                                 referencedTableName="ContentSpecNode"
                                 referencedColumnNames="ContentSpecNodeID"/>
        <addForeignKeyConstraint constraintName="FK_PropertyTagID_CS_NODE_PROP_TAG"
                                 baseTableName="CSNodeToPropertyTag"
                                 baseColumnNames="PropertyTagID"
                                 referencedTableName="PropertyTag"
                                 referencedColumnNames="PropertyTagID"/>
    </changeSet>

    <changeSet id="12" author="lnewson@redhat.com">
        <comment>Add new Content Spec Node to PropertyTag revision joiner table</comment>
        <createTable tableName="CSNodeToPropertyTag_AUD">
            <column name="CSNodeToPropertyTagID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REV" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REVTYPE" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="REVEND" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="CSNodeID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="PropertyTagID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="Value" type="text">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="CSNodeToPropertyTag_AUD" columnNames="CSNodeToPropertyTagID, REV"/>
        <addForeignKeyConstraint constraintName="FK_REV_CS_NODE_PROP_TAG"
                                 baseTableName="CSNodeToPropertyTag_AUD"
                                 baseColumnNames="REV"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <addForeignKeyConstraint constraintName="FK_REVEND_CS_NODE_PROP_TAG"
                                 baseTableName="CSNodeToPropertyTag_AUD"
                                 baseColumnNames="REVEND"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <createIndex tableName="CSNodeToPropertyTag_AUD" indexName="CSNodeID">
            <column name="CSNodeID"/>
        </createIndex>
        <createIndex tableName="CSNodeToPropertyTag_AUD" indexName="PropertyTagID">
            <column name="PropertyTagID"/>
        </createIndex>
    </changeSet>

    <changeSet id="13" author="lnewson@redhat.com">
        <comment>Add new Translated Content Spec table</comment>
        <createTable tableName="TranslatedContentSpec">
            <column name="TranslatedContentSpecID" type="int(11)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="ContentSpecID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="ContentSpecRevision" type="int(11)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addUniqueConstraint tableName="TranslatedContentSpec" columnNames="ContentSpecID, ContentSpecRevision"/>
    </changeSet>

    <changeSet id="14" author="lnewson@redhat.com">
        <comment>Add new Translated Content Spec revision table</comment>
        <createTable tableName="TranslatedContentSpec_AUD">
            <column name="TranslatedContentSpecID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REV" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REVTYPE" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="REVEND" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="ContentSpecID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="ContentSpecRevision" type="int(11)">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="TranslatedContentSpec_AUD" columnNames="TranslatedContentSpecID, REV"/>
        <addForeignKeyConstraint constraintName="FK_REV_TRANSLATED_CS"
                                 baseTableName="TranslatedContentSpec_AUD"
                                 baseColumnNames="REV"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <addForeignKeyConstraint constraintName="FK_REVEND_TRANSLATED_CS"
                                 baseTableName="TranslatedContentSpec_AUD"
                                 baseColumnNames="REVEND"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <createIndex tableName="TranslatedContentSpec_AUD" indexName="ContentSpecID">
            <column name="ContentSpecID"/>
            <column name="ContentSpecRevision"/>
        </createIndex>
    </changeSet>

    <changeSet id="15" author="lnewson@redhat.com">
        <comment>Add new Translated Content Spec Node table</comment>
        <createTable tableName="TranslatedCSNode">
            <column name="TranslatedCSNodeID" type="int(11)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="CSNodeID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="CSNodeRevision" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="OriginalString" type="text">
                <constraints nullable="true"/>
            </column>
            <column name="TranslatedContentSpecID" type="int(11)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addUniqueConstraint tableName="TranslatedCSNode" columnNames="CSNodeID, CSNodeRevision, TranslatedContentSpecID"/>
        <addForeignKeyConstraint constraintName="FK_TranslatedContentSpecID_TRANSLATED_CS_NODE"
                                 baseTableName="TranslatedCSNode"
                                 baseColumnNames="TranslatedContentSpecID"
                                 referencedTableName="TranslatedContentSpec"
                                 referencedColumnNames="TranslatedContentSpecID"/>
    </changeSet>

    <changeSet id="16" author="lnewson@redhat.com">
        <comment>Add new Translated Content Spec Node revision table</comment>
        <createTable tableName="TranslatedCSNode_AUD">
            <column name="TranslatedCSNodeID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REV" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REVTYPE" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="REVEND" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="CSNodeID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="CSNodeRevision" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="OriginalString" type="text">
                <constraints nullable="true"/>
            </column>
            <column name="TranslatedContentSpecID" type="int(11)">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="TranslatedCSNode_AUD" columnNames="TranslatedCSNodeID, REV"/>
        <addForeignKeyConstraint constraintName="FK_REV_TRANSLATED_CS_NODE"
                                 baseTableName="TranslatedCSNode_AUD"
                                 baseColumnNames="REV"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <addForeignKeyConstraint constraintName="FK_REVEND_TRANSLATED_CS_NODE"
                                 baseTableName="TranslatedCSNode_AUD"
                                 baseColumnNames="REVEND"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <createIndex tableName="TranslatedCSNode_AUD" indexName="TranslatedContentSpecID">
            <column name="TranslatedContentSpecID"/>
        </createIndex>
    </changeSet>

    <changeSet id="17" author="lnewson@redhat.com">
        <comment>Add new Translated Content Spec Node String table</comment>
        <createTable tableName="TranslatedCSNodeString">
            <column name="TranslatedCSNodeStringID" type="int(11)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="Locale" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="TranslatedString" type="text">
                <constraints nullable="true"/>
            </column>
            <column name="FuzzyTranslation" type="bit(1)">
                <constraints nullable="false"/>
            </column>
            <column name="TranslatedCSNodeID" type="int(11)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint constraintName="FK_TranslatedCSNodeID_TRANSLATED_CS_NODE_STRING"
                                 baseTableName="TranslatedCSNodeString"
                                 baseColumnNames="TranslatedCSNodeStringID"
                                 referencedTableName="TranslatedCSNode"
                                 referencedColumnNames="TranslatedCSNodeID"/>
    </changeSet>

    <changeSet id="18" author="lnewson@redhat.com">
        <comment>Add new Translated Content Spec Node String revision table</comment>
        <createTable tableName="TranslatedCSNodeString_AUD">
            <column name="TranslatedCSNodeStringID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REV" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REVTYPE" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="REVEND" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="Locale" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="TranslatedString" type="text">
                <constraints nullable="true"/>
            </column>
            <column name="FuzzyTranslation" type="bit(1)">
                <constraints nullable="true"/>
            </column>
            <column name="TranslatedCSNodeID" type="int(11)">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="TranslatedCSNodeString_AUD" columnNames="TranslatedCSNodeStringID, REV"/>
        <addForeignKeyConstraint constraintName="FK_REV_TRANSLATED_CS_NODE_STRING"
                                 baseTableName="TranslatedCSNodeString_AUD"
                                 baseColumnNames="REV"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <addForeignKeyConstraint constraintName="FK_REVEND_TRANSLATED_CS_NODE_STRING"
                                 baseTableName="TranslatedCSNodeString_AUD"
                                 baseColumnNames="REVEND"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <createIndex tableName="TranslatedCSNode_AUD" indexName="TranslatedCSNodeID">
            <column name="TranslatedCSNodeID"/>
        </createIndex>
    </changeSet>

    <changeSet id="19" author="lnewson@redhat.com">
        <comment>Add a column to Translated Topic Data to reference Translated Content Spec Node</comment>
        <addColumn tableName="TranslatedTopicData">
            <column name="TranslatedCSNodeID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="TranslatedXMLCondition" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
        </addColumn>
        <addForeignKeyConstraint constraintName="FK_TranslatedCSNodeID_TRANSLATED_TOPIC_DATA"
                                 baseTableName="TranslatedTopicData"
                                 baseColumnNames="TranslatedCSNodeID"
                                 referencedTableName="TranslatedCSNode"
                                 referencedColumnNames="TranslatedCSNodeID"/>
        <dropUniqueConstraint tableName="TranslatedTopicData" constraintName="TranslatedTopicID"/>
        <addUniqueConstraint tableName="TranslatedTopicData" columnNames="TranslatedTopicID, TranslationLocale, TranslatedCSNodeID"
                             constraintName="TranslatedTopicID"/>
    </changeSet>

    <changeSet id="20" author="lnewson@redhat.com">
        <comment>Add a column to Translated Topic Data AUD to reference Translated Content Spec Node AUD</comment>
        <addColumn tableName="TranslatedTopicData_AUD">
            <column name="TranslatedCSNodeID" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="TranslatedXMLCondition" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
        </addColumn>
        <createIndex tableName="TranslatedTopicData_AUD" indexName="TranslatedCSNodeID">
            <column name="TranslatedCSNodeID"/>
        </createIndex>
    </changeSet>

    <changeSet id="21" author="lnewson@redhat.com">
        <comment>Add new File table</comment>
        <createTable tableName="File">
            <column name="FileID" type="int(11)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="FileName" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="FilePath" type="varchar(512)">
                <constraints nullable="true"/>
            </column>
            <column name="Description" type="varchar(512)">
                <constraints nullable="true"/>
            </column>
            <column name="ExplodeArchive" type="bit(1)" defaultValue="0">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="22" author="lnewson@redhat.com">
        <comment>Add new File revision table</comment>
        <createTable tableName="File_AUD">
            <column name="FileID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REV" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REVTYPE" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="REVEND" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="FileName" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="FilePath" type="varchar(512)">
                <constraints nullable="true"/>
            </column>
            <column name="Description" type="varchar(512)">
                <constraints nullable="true"/>
            </column>
            <column name="ExplodeArchive" type="bit(1)">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="File_AUD" columnNames="FileID, REV"/>
        <addForeignKeyConstraint constraintName="FK_REV_FILE"
                                 baseTableName="File_AUD"
                                 baseColumnNames="REV"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <addForeignKeyConstraint constraintName="FK_REVEND_FILE"
                                 baseTableName="File_AUD"
                                 baseColumnNames="REVEND"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
    </changeSet>

    <changeSet id="23" author="lnewson@redhat.com">
        <comment>Add new Language File table</comment>
        <createTable tableName="LanguageFile">
            <column name="LanguageFileID" type="int(11)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="Locale" type="varchar(20)">
                <constraints nullable="false"/>
            </column>
            <column name="FileData" type="longblob"/>
            <column name="OriginalFileName" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="FileID" type="int(11)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint constraintName="FK_FileID_LANGUAGE_FILE"
                                 baseTableName="LanguageFile"
                                 baseColumnNames="FileID"
                                 referencedTableName="File"
                                 referencedColumnNames="FileID"/>
        <addUniqueConstraint tableName="LanguageFile" columnNames="FileID, Locale"/>
    </changeSet>

    <changeSet id="24" author="lnewson@redhat.com">
        <comment>Add new Language File revision table</comment>
        <createTable tableName="LanguageFile_AUD">
            <column name="LanguageFileID" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REV" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="REVTYPE" type="tinyint">
                <constraints nullable="true"/>
            </column>
            <column name="REVEND" type="int(11)">
                <constraints nullable="true"/>
            </column>
            <column name="Locale" type="varchar(20)">
                <constraints nullable="true"/>
            </column>
            <column name="FileData" type="longblob">
                <constraints nullable="true"/>
            </column>
            <column name="OriginalFileName" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="FileID" type="int(11)">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="LanguageFile_AUD" columnNames="LanguageFileID, REV"/>
        <addForeignKeyConstraint constraintName="FK_REV_LANGUAGE_FILE"
                                 baseTableName="LanguageFile_AUD"
                                 baseColumnNames="REV"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <addForeignKeyConstraint constraintName="FK_REVEND_LANGUAGE_FILE"
                                 baseTableName="LanguageFile_AUD"
                                 baseColumnNames="REVEND"
                                 referencedTableName="REVINFO"
                                 referencedColumnNames="REV"/>
        <createIndex tableName="LanguageFile_AUD" indexName="FileID">
            <column name="FileID"/>
        </createIndex>
    </changeSet>

    <changeSet id="25" author="lnewson@redhat.com">
        <comment>Add the FilterClassType column for filters</comment>
        <addColumn tableName="Filter">
            <column name="FilterClassType" type="tinyint" valueNumeric="0">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="26" author="lnewson@redhat.com">
        <comment>Add the FilterClassType column for filter revisions</comment>
        <addColumn tableName="Filter_AUD">
            <column name="FilterClassType" type="tinyint" valueNumeric="0">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="27" author="lnewson@redhat.com">
        <comment>Add an index to the ContentSpecNode tables to make querying entities faster.</comment>
        <createIndex tableName="ContentSpecNode" indexName="Entity">
            <column name="EntityID"/>
            <column name="EntityRevision"/>
        </createIndex>
        <createIndex tableName="ContentSpecNode_AUD" indexName="Entity">
            <column name="EntityID"/>
            <column name="EntityRevision"/>
        </createIndex>
    </changeSet>

    <changeSet id="28" author="lnewson@redhat.com">
        <comment>Remove TopicSecondOrderData auditing table</comment>
        <dropTable tableName="TopicSecondOrderData_AUD"/>
    </changeSet>

    <changeSet id="29" author="lnewson@redhat.com">
        <comment>Remove the ImageBase64 column to remove duplicate data</comment>
        <dropColumn tableName="LanguageImage" columnName="ImageDataBase64"/>
        <dropColumn tableName="LanguageImage_AUD" columnName="ImageDataBase64"/>
    </changeSet>

</databaseChangeLog>